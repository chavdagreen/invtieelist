<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="InviteePro">
    <meta name="theme-color" content="#7c3aed">
    <meta name="description" content="Manage your invitee lists for multiple events">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-96.png">
    <title>InviteePro - Event Guest Management</title>
    <link rel="stylesheet" href="styles.css">
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.1/jspdf.plugin.autotable.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- ==================== LANDING PAGE ==================== -->
    <div class="landing-page" id="landingPage">
        <!-- Navigation -->
        <nav class="landing-nav">
            <div class="landing-nav-container">
                <div class="landing-logo">
                    <span class="logo-icon">&#127881;</span>
                    InviteePro
                </div>
                <div class="landing-nav-links">
                    <a href="#features">Features</a>
                    <a href="#how-it-works">How it Works</a>
                    <button class="btn btn-outline btn-nav" onclick="openAuthModal('login')">Sign In</button>
                    <button class="btn btn-primary btn-nav" onclick="openAuthModal('signup')">Get Started</button>
                </div>
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">&#9776;</button>
            </div>
        </nav>

        <!-- Mobile Menu -->
        <div class="mobile-menu" id="mobileMenu">
            <a href="#features" onclick="toggleMobileMenu()">Features</a>
            <a href="#how-it-works" onclick="toggleMobileMenu()">How it Works</a>
            <button class="btn btn-outline" onclick="openAuthModal('login'); toggleMobileMenu();" style="width:100%;">Sign In</button>
            <button class="btn btn-primary" onclick="openAuthModal('signup'); toggleMobileMenu();" style="width:100%;">Get Started</button>
        </div>

        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-background">
                <div class="floating-shape shape-1"></div>
                <div class="floating-shape shape-2"></div>
                <div class="floating-shape shape-3"></div>
                <div class="floating-shape shape-4"></div>
                <div class="floating-shape shape-5"></div>
            </div>

            <div class="hero-content">
                <div class="hero-text">
                    <div class="hero-badge">
                        <span>&#10024;</span> Free & Easy to Use
                    </div>
                    <h1 class="hero-title">
                        Manage Your Event
                        <span class="gradient-text">Guest Lists</span>
                        Effortlessly
                    </h1>
                    <p class="hero-subtitle">
                        Create multiple events, track RSVPs, send WhatsApp invitations, and export beautiful guest lists. Perfect for weddings, parties, and corporate events.
                    </p>
                    <div class="hero-cta">
                        <button class="btn btn-primary btn-large" onclick="openAuthModal('signup')">
                            <span>&#127881;</span> Start Free Now
                        </button>
                        <button class="btn btn-outline btn-large" onclick="openAuthModal('login')">
                            <span>&#128100;</span> Sign In
                        </button>
                    </div>
                    <div class="hero-stats">
                        <div class="hero-stat">
                            <span class="hero-stat-number">100%</span>
                            <span class="hero-stat-label">Free</span>
                        </div>
                        <div class="hero-stat">
                            <span class="hero-stat-number">&#9729;</span>
                            <span class="hero-stat-label">Cloud Sync</span>
                        </div>
                        <div class="hero-stat">
                            <span class="hero-stat-number">&#128274;</span>
                            <span class="hero-stat-label">Secure</span>
                        </div>
                    </div>
                </div>

                <div class="hero-visual">
                    <div class="dashboard-preview">
                        <div class="preview-header">
                            <div class="preview-dots">
                                <span></span><span></span><span></span>
                            </div>
                            <span>InviteePro Dashboard</span>
                        </div>
                        <div class="preview-content">
                            <div class="preview-stats">
                                <div class="preview-stat-card purple">
                                    <span class="preview-stat-icon">&#128101;</span>
                                    <span class="preview-stat-value">248</span>
                                    <span class="preview-stat-label">Families</span>
                                </div>
                                <div class="preview-stat-card pink">
                                    <span class="preview-stat-icon">&#127881;</span>
                                    <span class="preview-stat-value">892</span>
                                    <span class="preview-stat-label">Guests</span>
                                </div>
                                <div class="preview-stat-card green">
                                    <span class="preview-stat-icon">&#9989;</span>
                                    <span class="preview-stat-value">654</span>
                                    <span class="preview-stat-label">Confirmed</span>
                                </div>
                            </div>
                            <div class="preview-table">
                                <div class="preview-row header">
                                    <span>Name</span><span>Members</span><span>Status</span>
                                </div>
                                <div class="preview-row">
                                    <span>Sharma Family</span><span>4</span><span class="status-badge confirmed">Confirmed</span>
                                </div>
                                <div class="preview-row">
                                    <span>Patel Family</span><span>6</span><span class="status-badge pending">Pending</span>
                                </div>
                                <div class="preview-row">
                                    <span>Mehta Family</span><span>3</span><span class="status-badge confirmed">Confirmed</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Floating Elements -->
                    <div class="floating-card card-1">
                        <span class="floating-card-icon">&#128172;</span>
                        <span>WhatsApp Ready</span>
                    </div>
                    <div class="floating-card card-2">
                        <span class="floating-card-icon">&#128196;</span>
                        <span>Export to Excel</span>
                    </div>
                    <div class="floating-card card-3">
                        <span class="floating-card-icon">&#128274;</span>
                        <span>Private & Secure</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="features-section" id="features">
            <div class="section-container">
                <div class="section-header">
                    <span class="section-badge">Features</span>
                    <h2 class="section-title">Everything You Need to Manage Guests</h2>
                    <p class="section-subtitle">Powerful features designed to make event planning simple and stress-free</p>
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon purple">&#127881;</div>
                        <h3>Multiple Events</h3>
                        <p>Create separate guest lists for weddings, receptions, birthdays, and more. Switch between events easily.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon pink">&#128172;</div>
                        <h3>WhatsApp Integration</h3>
                        <p>Send personalized invitations via WhatsApp with custom templates. Use variables for names and details.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon green">&#9989;</div>
                        <h3>RSVP Tracking</h3>
                        <p>Track who's coming, who's pending, and who declined. Get real-time updates on your guest count.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon orange">&#128196;</div>
                        <h3>Export Options</h3>
                        <p>Export your guest list to Excel or PDF. Create sticker lists for name tags and seating charts.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon blue">&#128229;</div>
                        <h3>Import Guests</h3>
                        <p>Reuse guest lists from previous events. Import with one click and save time on data entry.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon violet">&#127869;</div>
                        <h3>Food Preferences</h3>
                        <p>Track dietary requirements and food preferences. Perfect for catering planning and arrangements.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-it-works-section" id="how-it-works">
            <div class="section-container">
                <div class="section-header">
                    <span class="section-badge">Simple Process</span>
                    <h2 class="section-title">Get Started in Minutes</h2>
                    <p class="section-subtitle">Three simple steps to organize your perfect event</p>
                </div>

                <div class="steps-container">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">&#128100;</div>
                        <h3>Create Account</h3>
                        <p>Sign up with Google or email in seconds. Your data is private and secure.</p>
                    </div>
                    <div class="step-connector"></div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">&#128197;</div>
                        <h3>Add Your Event</h3>
                        <p>Create an event with date, venue, and start adding your guest list.</p>
                    </div>
                    <div class="step-connector"></div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">&#128640;</div>
                        <h3>Manage & Share</h3>
                        <p>Track RSVPs, send invites via WhatsApp, and export your lists anytime.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section class="cta-section">
            <div class="cta-content">
                <h2>Ready to Organize Your Event?</h2>
                <p>Join thousands of users who trust InviteePro for their event management</p>
                <button class="btn btn-primary btn-large" onclick="openAuthModal('signup')">
                    <span>&#127881;</span> Get Started Free
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="landing-footer">
            <div class="footer-content">
                <div class="footer-logo">
                    <span>&#127881;</span> InviteePro
                </div>
                <p>Made with &#10084;&#65039; for event planners everywhere</p>
            </div>
        </footer>
    </div>

    <!-- ==================== AUTH MODAL ==================== -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <button class="auth-close-btn" onclick="closeAuthModal()">&times;</button>

            <div class="auth-header">
                <div class="auth-logo">&#127881; InviteePro</div>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form">
                <h2>Welcome Back</h2>
                <p>Sign in to continue to your dashboard</p>

                <button class="btn btn-google-auth" onclick="signInWithGoogle()">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Continue with Google
                </button>

                <div class="auth-divider">
                    <span>or sign in with email</span>
                </div>

                <div class="auth-input-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="you@example.com">
                </div>
                <div class="auth-input-group">
                    <label>Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password">
                </div>

                <button class="btn btn-primary btn-auth" onclick="signInWithEmail()">Sign In</button>

                <p class="auth-switch">
                    Don't have an account? <a href="#" onclick="showSignupForm(); return false;">Create one</a>
                </p>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="auth-form" style="display: none;">
                <h2>Create Account</h2>
                <p>Get started with your free account</p>

                <button class="btn btn-google-auth" onclick="signInWithGoogle()">
                    <svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
                    Continue with Google
                </button>

                <div class="auth-divider">
                    <span>or sign up with email</span>
                </div>

                <div class="auth-input-group">
                    <label>Your Name</label>
                    <input type="text" id="signupName" placeholder="John Doe">
                </div>
                <div class="auth-input-group">
                    <label>Email</label>
                    <input type="email" id="signupEmail" placeholder="you@example.com">
                </div>
                <div class="auth-input-group">
                    <label>Password</label>
                    <input type="password" id="signupPassword" placeholder="Min 6 characters">
                </div>

                <button class="btn btn-primary btn-auth" onclick="signUpWithEmail()">Create Account</button>

                <p class="auth-switch">
                    Already have an account? <a href="#" onclick="showLoginForm(); return false;">Sign in</a>
                </p>
            </div>
        </div>
    </div>

    <!-- ==================== APP DASHBOARD (Hidden initially) ==================== -->
    <div class="app-layout" id="appDashboard" style="display: none;">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-logo">InviteePro</div>
            <nav class="sidebar-nav">
                <div class="nav-item active">
                    <span>&#127968;</span> Dashboard
                </div>
                <div class="nav-item" onclick="document.getElementById('guestTable').scrollIntoView({behavior: 'smooth'})">
                    <span>&#128101;</span> Guest List
                </div>
                <div class="nav-item" onclick="openWhatsappTemplateModal()">
                    <span>&#128172;</span> WhatsApp
                </div>
                <div class="nav-item" onclick="openImportGuestsModal()">
                    <span>&#128229;</span> Import Guests
                </div>
                <div class="nav-item" onclick="openExportModal()">
                    <span>&#128196;</span> Export
                </div>
                <div class="nav-item" onclick="openBackupModal()">
                    <span>&#128190;</span> Backup
                </div>
                <div class="nav-item" onclick="openHostModal()">
                    <span>&#128100;</span> Manage Hosts
                </div>
            </nav>
            <div class="nav-item" onclick="openAddModal()" style="margin-top: auto; background: rgba(255,255,255,0.2);">
                <span>&#10133;</span> Add Guest
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Header -->
                <header class="header">
                    <div class="header-title">
                        <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
  <h1 id="eventTitle">InviteePro</h1>
  <button class="btn btn-secondary" id="editEventBtn" onclick="openEditEventModal()" title="Edit Event">‚úèÔ∏è Edit</button>
</div>
                        <p id="eventSubtitle">Create multiple events and manage invitees.</p>
                        <div class="event-toolbar">
                            <select id="eventSelect" class="select">
                                <option value="">Select Event</option>
                            </select>
                            <button class="btn btn-outline" onclick="openEventModal()">+ New Event</button>
                        </div>
                    </div>
                    <div class="header-actions">
                        <div class="user-pill" id="userPill" style="display:none;">
                            <span class="user-avatar" id="userAvatar">üë§</span>
                            <span class="user-name" id="userName">User</span>
                            <button class="btn-logout" onclick="signOutUser()" title="Sign Out">&#9211;</button>
                        </div>

                        <button class="btn btn-primary" id="addGuestBtn" onclick="openAddModal()" style="display:none;">
                            <span>+</span> Add Guest
                        </button>
                    </div>
                </header>

                <!-- Dashboard Stats -->
                <section class="dashboard">
                    <div class="stat-card purple">
                        <div class="stat-icon">&#128101;</div>
                        <div>
                            <div class="stat-label">Total Families</div>
                            <div class="stat-value" id="totalFamilies">0</div>
                            <div class="stat-sub">Invited families</div>
                        </div>
                    </div>
                    <div class="stat-card pink">
                        <div class="stat-icon">&#127881;</div>
                        <div>
                            <div class="stat-label">Total Guests</div>
                            <div class="stat-value" id="totalGuests">0</div>
                            <div class="stat-sub">For dinner arrangements</div>
                        </div>
                    </div>
                    <div class="stat-card orange">
                        <div class="stat-icon">&#9203;</div>
                        <div>
                            <div class="stat-label">Pending RSVP</div>
                            <div class="stat-value" id="pendingCount">0</div>
                            <div class="stat-sub">Awaiting response</div>
                        </div>
                    </div>
                    <div class="stat-card green">
                        <div class="stat-icon">&#9989;</div>
                        <div>
                            <div class="stat-label">Confirmed</div>
                            <div class="stat-value" id="confirmedCount">0</div>
                            <div class="stat-sub">Ready to attend</div>
                        </div>
                    </div>
                </section>

                <!-- Content Grid - Side panels -->
                <section class="content-grid">
                    <!-- Left Side - Food Summary -->
                    <div class="card">
                        <div class="card-header">
                            <h2><span>&#127869;</span> Food Preference Summary</h2>
                        </div>
                        <div class="card-body">
                            <div class="food-summary">
                                <div class="food-item">
                                    <div class="food-icon">&#127858;</div>
                                    <div class="food-count" id="regularCount">0</div>
                                    <div class="food-label">Regular</div>
                                </div>
                                <div class="food-item">
                                    <div class="food-icon">&#128591;</div>
                                    <div class="food-count" id="swaminarayanCount">0</div>
                                    <div class="food-label">Swaminarayan</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Side - RSVP Status & Quick Actions -->
                    <div>
                        <div class="card" style="margin-bottom: 20px;">
                            <div class="card-header">
                                <h2><span>&#128202;</span> RSVP Status</h2>
                            </div>
                            <div class="card-body">
                                <div class="status-list">
                                    <div class="status-item">
                                        <span class="status-dot green"></span>
                                        <span class="status-label">Confirmed</span>
                                        <span class="status-count" id="statusConfirmed">0</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-dot yellow"></span>
                                        <span class="status-label">Pending</span>
                                        <span class="status-count" id="statusPending">0</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-dot red"></span>
                                        <span class="status-label">Declined</span>
                                        <span class="status-count" id="statusDeclined">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2><span>&#128222;</span> Call Tracker</h2>
                            </div>
                            <div class="card-body">
                                <div class="status-list">
                                    <div class="status-item">
                                        <span class="status-dot green"></span>
                                        <span class="status-label">Calls Done</span>
                                        <span class="status-count" id="callsCount">0</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-dot yellow"></span>
                                        <span class="status-label">Calls Pending</span>
                                        <span class="status-count" id="callsPendingCount">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h2><span>&#127873;</span> Gift Tracker</h2>
                            </div>
                            <div class="card-body">
                                <div class="status-list">
                                    <div class="status-item">
                                        <span class="status-dot green"></span>
                                        <span class="status-label">Gifts Received</span>
                                        <span class="status-count" id="giftsCount">0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Quick Actions -->
                <section class="card" style="margin-bottom: 24px;">
                    <div class="card-header">
                        <h2><span>&#9889;</span> Quick Actions</h2>
                    </div>
                    <div class="card-body">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                            <div class="quick-action-item" onclick="openAddModal()">
                                <div class="quick-action-icon purple">&#128221;</div>
                                <div class="quick-action-text">
                                    <h4>Add New Guest</h4>
                                    <p>Add family to the list</p>
                                </div>
                            </div>
                            <div class="quick-action-item" onclick="openImportGuestsModal()">
                                <div class="quick-action-icon blue">&#128229;</div>
                                <div class="quick-action-text">
                                    <h4>Import Guests</h4>
                                    <p>From your other events</p>
                                </div>
                            </div>
                            <div class="quick-action-item" onclick="openWhatsappTemplateModal()">
                                <div class="quick-action-icon green">&#128172;</div>
                                <div class="quick-action-text">
                                    <h4>WhatsApp Templates</h4>
                                    <p>Send custom invitations</p>
                                </div>
                            </div>
                            <div class="quick-action-item" onclick="openExportModal()">
                                <div class="quick-action-icon pink">&#128196;</div>
                                <div class="quick-action-text">
                                    <h4>Export List</h4>
                                    <p>Download Excel or PDF</p>
                                </div>
                            </div>
                            <div class="quick-action-item" onclick="copyAllWhatsappNumbers()">
                                <div class="quick-action-icon orange">&#128222;</div>
                                <div class="quick-action-text">
                                    <h4>Copy All Numbers</h4>
                                    <p>For WhatsApp broadcast</p>
                                </div>
                            </div>
                            <div class="quick-action-item" onclick="openHostModal()">
                                <div class="quick-action-icon violet">&#128100;</div>
                                <div class="quick-action-text">
                                    <h4>Manage Hosts</h4>
                                    <p>Add or edit host names</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Action Bar -->
                <section class="action-bar">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Search by name, phone or host...">
                    </div>
                    <div class="filter-box">
                        <select id="filterRsvp">
                            <option value="">All RSVP Status</option>
                            <option value="Pending">Pending</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Declined">Declined</option>
                        </select>
                        <select id="filterFood">
                            <option value="">All Food Preferences</option>
                            <option value="Regular">Regular</option>
                            <option value="Swaminarayan">Swaminarayan</option>
                        </select>
                        <select id="filterHost">
                            <option value="">All Hosts</option>
                            <!-- Dynamic host options will be added here -->
                        </select>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="openAddModal()">+ Add Guest</button>
                        <button class="btn btn-secondary" onclick="openExportModal()">Export</button>
                        <button class="btn btn-outline" onclick="openBackupModal()">Backup</button>
                    </div>
                </section>

                <!-- Guest Table -->
                <section class="table-section">
                    <div class="table-wrapper">
                        <table id="guestTable">
                            <thead>
                                <tr>
                                    <th>S.No</th>
                                    <th>Family Head Name</th>
                                    <th>Relative Of</th>
                                    <th>Members</th>
                                    <th>WhatsApp</th>
                                    <th>Food Pref</th>
                                    <th>RSVP</th>
                                    <th>Called</th>
                                    <th>Gift</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="guestTableBody">
                                <!-- Dynamic content -->
                            </tbody>
                        </table>
                    </div>
                    <div class="empty-state" id="emptyState">
                        <div class="empty-icon">&#128221;</div>
                        <p>No guests added yet. Start by adding your first guest!</p>
                        <button class="btn btn-primary" onclick="openAddModal()">+ Add Your First Guest</button>
                    </div>
                </section>
            </div>
        </main>

        <!-- Bottom Navigation Bar (Mobile) -->
        <nav class="bottom-nav" id="bottomNav">
            <div class="bottom-nav-item active" data-tab="home" onclick="switchTab('home')">
                <span class="bottom-nav-icon">&#127968;</span>
                <span class="bottom-nav-label">Home</span>
            </div>
            <div class="bottom-nav-item" data-tab="guests" onclick="switchTab('guests')">
                <span class="bottom-nav-icon">&#128101;</span>
                <span class="bottom-nav-label">Guests</span>
            </div>
            <div class="bottom-nav-item bottom-nav-add" onclick="openAddModal()">
                <span class="bottom-nav-icon">&#10133;</span>
            </div>
            <div class="bottom-nav-item" data-tab="whatsapp" onclick="openWhatsappTemplateModal()">
                <span class="bottom-nav-icon">&#128172;</span>
                <span class="bottom-nav-label">WhatsApp</span>
            </div>
            <div class="bottom-nav-item" data-tab="settings" onclick="openSettingsSheet()">
                <span class="bottom-nav-icon">&#9881;</span>
                <span class="bottom-nav-label">More</span>
            </div>
        </nav>

        <!-- Offline Indicator -->
        <div class="offline-indicator" id="offlineIndicator">
            <span class="offline-icon">&#9888;</span>
            <span>You're offline</span>
        </div>

        <!-- Install Prompt -->
        <div class="install-prompt" id="installPrompt">
            <div class="install-prompt-content">
                <span class="install-prompt-icon">&#127881;</span>
                <div class="install-prompt-text">
                    <h4>Install InviteePro</h4>
                    <p>Add to your home screen for the best experience</p>
                </div>
            </div>
            <div class="install-prompt-actions">
                <button class="btn btn-outline" onclick="dismissInstallPrompt()">Not Now</button>
                <button class="btn btn-primary" onclick="installApp()">Install</button>
            </div>
        </div>
    </div>

    <!-- Add/Edit Guest Modal -->
    <div class="modal" id="guestModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Guest</h2>
                <button class="close-btn" onclick="closeModal('guestModal')">&times;</button>
            </div>
            <form id="guestForm" onsubmit="saveGuest(event)">
                <input type="hidden" id="guestId">

                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name *</label>
                        <input type="text" id="firstName" required placeholder="e.g., Rajesh">
                    </div>
                    <div class="form-group">
                        <label for="surname">Surname *</label>
                        <input type="text" id="surname" required placeholder="e.g., Sharma">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="relativeOf">Relative of Whom *</label>
                        <div class="host-select-wrapper">
                            <select id="relativeOf" required>
                                <option value="">Select Host</option>
                                <!-- Dynamic host options -->
                            </select>
                            <button type="button" class="btn btn-small btn-outline" onclick="openAddHostInline()" title="Add new host">+</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="members">Number of Family Members *</label>
                        <input type="number" id="members" min="1" value="1" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="whatsapp">WhatsApp Number *</label>
                        <div class="phone-input-wrapper">
                            <div class="phone-input">
                                <span class="country-code">+91</span>
                                <input type="tel" id="whatsapp" required placeholder="9876543210"
                                       pattern="[0-9]{10}" maxlength="10"
                                       title="Enter 10 digit mobile number">
                            </div>
                            <button type="button" class="btn btn-outline btn-contact-picker" id="contactPickerBtn" onclick="pickContact()" title="Pick from contacts" style="display:none;">
                                &#128222;
                            </button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="foodPref">Food Preference</label>
                        <select id="foodPref">
                            <option value="Regular" selected>Regular</option>
                            <option value="Swaminarayan">Swaminarayan</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="rsvpStatus">RSVP Status</label>
                        <select id="rsvpStatus">
                            <option value="Pending">Pending</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Declined">Declined</option>
                        </select>
                    </div>
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="callDone" onchange="triggerHaptic()">
                            Call Done
                        </label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="giftGiven" onchange="toggleGiftDescription()">
                            Gift Given
                        </label>
                    </div>
                </div>

                <div class="form-group" id="giftDescGroup" style="display: none;">
                    <label for="giftDescription">Gift Description</label>
                    <input type="text" id="giftDescription" placeholder="e.g., Silver Coin">
                </div>

                <div class="form-group">
                    <label for="notes">Notes (Optional)</label>
                    <textarea id="notes" rows="2" placeholder="Any additional notes..."></textarea>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('guestModal')">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Guest</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Manage Hosts Modal -->
    <div class="modal" id="hostModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Hosts</h2>
                <button class="close-btn" onclick="closeModal('hostModal')">&times;</button>
            </div>
            <div class="host-management">
                <div class="add-host-section">
                    <h3>Add New Host</h3>
                    <div class="add-host-form">
                        <input type="text" id="newHostName" placeholder="Enter host name (e.g., Vivek Chavda)">
                        <input type="email" id="newHostEmail" placeholder="Email (optional, for co-host access)">
                        <button class="btn btn-primary" onclick="addHost()">Add Host</button>
                    </div>
                    <p class="helper-text">Co-hosts with email can be invited to help manage the guest list.</p>
                </div>
                <hr>
                <div class="host-list-section">
                    <h3>Current Hosts</h3>
                    <div id="hostList" class="host-list">
                        <!-- Dynamic host list -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Export Guest List</h2>
                <button class="close-btn" onclick="closeModal('exportModal')">&times;</button>
            </div>
            <div class="export-options">
                <h3>&#9745; Select Columns to Export</h3>
                <div class="checkbox-grid">
                    <label><input type="checkbox" id="expSno" checked> S.No</label>
                    <label><input type="checkbox" id="expName" checked> Family Head Name</label>
                    <label><input type="checkbox" id="expRelativeOf" checked> Relative Of</label>
                    <label><input type="checkbox" id="expMembers" checked> Members</label>
                    <label><input type="checkbox" id="expWhatsapp" checked> WhatsApp</label>
                    <label><input type="checkbox" id="expFood" checked> Food Preference</label>
                    <label><input type="checkbox" id="expRsvp" checked> RSVP Status</label>
                    <label><input type="checkbox" id="expGift" checked> Gift</label>
                    <label><input type="checkbox" id="expNotes" checked> Notes</label>
                </div>

                <h3>&#128196; Export Format</h3>
                <div class="export-buttons">
                    <button class="btn btn-success" onclick="exportToExcel()">
                        <span>&#128196;</span> Export to Excel
                    </button>
                    <button class="btn btn-danger" onclick="exportToPDF()">
                        <span>&#128195;</span> Export to PDF
                    </button>
                </div>

                <hr>

                <h3>&#9889; Quick Export</h3>
                <div class="export-buttons">
                    <button class="btn btn-warning" onclick="exportStickerList()">
                        <span>&#127991;</span> Sticker List (Names)
                    </button>
                    <button class="btn btn-whatsapp" onclick="copyAllWhatsappNumbers()">
                        <span>&#128222;</span> Copy WhatsApp Numbers
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Backup/Restore Modal -->
    <div class="modal" id="backupModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Backup & Restore</h2>
                <button class="close-btn" onclick="closeModal('backupModal')">&times;</button>
            </div>
            <div class="backup-options">
                <div class="backup-section">
                    <h3>&#128190; Backup Data</h3>
                    <p>Download your guest list as a JSON file for safekeeping.</p>
                    
                    <div class="form-group" style="margin-top:12px;">
                        <label>Backup Scope</label>
                        <select id="backupScope" class="select">
                            <option value="current">Current Event</option>
                            <option value="all">All Events</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="downloadBackup()">
                        <span>&#128190;</span> Download Backup
                    </button>
                </div>
                <hr style="border: none; border-top: 2px dashed var(--border-color); margin: 24px 0;">
                <div class="backup-section">
                    <h3>&#128194; Restore Data</h3>
                    <p>Restore your guest list from a previously saved backup file.</p>
                    <p class="warning">Warning: This will replace all current data!</p>
                    <input type="file" id="restoreFile" accept=".json" onchange="restoreBackup(event)">
                    <label for="restoreFile" class="btn btn-outline">
                        <span>&#128194;</span> Choose Backup File
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Confirm Delete</h2>
                <button class="close-btn" onclick="closeModal('deleteModal')">&times;</button>
            </div>
            <div class="delete-confirm">
                <p>Are you sure you want to delete <strong id="deleteGuestName"></strong>?</p>
                <p class="warning">This action cannot be undone.</p>
                <div class="form-actions" style="justify-content: center;">
                    <button class="btn btn-outline" onclick="closeModal('deleteModal')">Cancel</button>
                    <button class="btn btn-danger" onclick="confirmDelete()">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Host Inline Modal -->
    <div class="modal" id="addHostInlineModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Add New Host</h2>
                <button class="close-btn" onclick="closeModal('addHostInlineModal')">&times;</button>
            </div>
            <div style="padding: 24px;">
                <div class="form-group">
                    <label for="inlineHostName">Host Name *</label>
                    <input type="text" id="inlineHostName" placeholder="Enter host name (e.g., Vivek Chavda)">
                </div>
                <div class="form-group">
                    <label for="inlineHostEmail">Email (Optional)</label>
                    <input type="email" id="inlineHostEmail" placeholder="For co-host collaboration">
                </div>
                <div class="form-actions">
                    <button class="btn btn-outline" onclick="closeModal('addHostInlineModal')">Cancel</button>
                    <button class="btn btn-primary" onclick="addHostInline()">Add Host</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <!-- Import Guests Modal -->
    <div class="modal" id="importGuestsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Import Guests from Event</h2>
                <button class="close-btn" onclick="closeModal('importGuestsModal')">&times;</button>
            </div>
            <div class="import-guests-options">
                <p class="helper-text" style="margin-bottom: 16px;">Select an event to import guests from. Only your own events are shown.</p>

                <div class="form-group">
                    <label for="importSourceEvent">Source Event</label>
                    <select id="importSourceEvent" class="select" style="width: 100%;">
                        <option value="">Select an event...</option>
                    </select>
                </div>

                <div id="importPreview" style="display: none;">
                    <div class="import-stats">
                        <div class="import-stat-item">
                            <span class="import-stat-icon">&#128101;</span>
                            <span class="import-stat-value" id="importFamilyCount">0</span>
                            <span class="import-stat-label">Families</span>
                        </div>
                        <div class="import-stat-item">
                            <span class="import-stat-icon">&#127881;</span>
                            <span class="import-stat-value" id="importGuestCount">0</span>
                            <span class="import-stat-label">Guests</span>
                        </div>
                        <div class="import-stat-item">
                            <span class="import-stat-icon">&#128100;</span>
                            <span class="import-stat-value" id="importHostCount">0</span>
                            <span class="import-stat-label">Hosts</span>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 16px;">
                        <label>
                            <input type="checkbox" id="importHostsToo" checked>
                            Also import hosts from source event
                        </label>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="resetRsvpStatus" checked>
                            Reset RSVP status to "Pending" for imported guests
                        </label>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-outline" onclick="closeModal('importGuestsModal')">Cancel</button>
                    <button class="btn btn-primary" id="importGuestsBtn" onclick="importGuestsFromEvent()" disabled>Import Guests</button>
                </div>
            </div>
        </div>
    </div>

    <!-- WhatsApp Templates Modal -->
    <div class="modal" id="whatsappTemplateModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>WhatsApp Message Templates</h2>
                <button class="close-btn" onclick="closeModal('whatsappTemplateModal')">&times;</button>
            </div>
            <div class="whatsapp-template-options">
                <p class="helper-text" style="margin-bottom: 16px;">
                    Create message templates with variables. Use placeholders like {name}, {event}, {date}, {venue}, {members}.
                </p>

                <div class="template-list" id="templateList">
                    <!-- Templates will be rendered here -->
                </div>

                <div class="add-template-section">
                    <h4>Add New Template</h4>
                    <div class="form-group">
                        <label for="newTemplateName">Template Name</label>
                        <input type="text" id="newTemplateName" placeholder="e.g., Wedding Invite, Reminder...">
                    </div>
                    <div class="form-group">
                        <label for="newTemplateMessage">Message Template</label>
                        <textarea id="newTemplateMessage" rows="4" placeholder="Hi {name}, you are invited to {event} on {date} at {venue}. Please confirm your attendance."></textarea>
                        <p class="helper-text">Available: {name}, {event}, {date}, {venue}, {members}, {host}</p>
                    </div>
                    <div class="form-group">
                        <label for="newTemplateImage">Image URL (Optional)</label>
                        <input type="url" id="newTemplateImage" placeholder="https://example.com/invite-card.jpg">
                        <p class="helper-text">Add invitation card image to share with message</p>
                    </div>
                    <button class="btn btn-primary" onclick="addWhatsappTemplate()">Add Template</button>
                </div>

                <hr style="border: none; border-top: 2px dashed var(--border-color); margin: 24px 0;">

                <div class="send-message-section">
                    <h4>Send to Guests</h4>
                    <div class="form-group">
                        <label for="sendTemplateSelect">Select Template</label>
                        <select id="sendTemplateSelect" class="select" style="width: 100%;">
                            <option value="">Choose a template...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sendToFilter">Send To</label>
                        <select id="sendToFilter" class="select" style="width: 100%;">
                            <option value="all">All Guests</option>
                            <option value="pending">Pending RSVP Only</option>
                            <option value="confirmed">Confirmed Only</option>
                            <option value="declined">Declined Only</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Preview (first guest)</label>
                        <div class="message-preview" id="messagePreview">
                            Select a template to see preview...
                        </div>
                    </div>
                    <div class="send-actions">
                        <button class="btn btn-whatsapp" onclick="openBulkWhatsApp()">
                            &#128172; Open WhatsApp for Each Guest
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Bottom Sheet -->
    <div class="bottom-sheet" id="settingsSheet">
        <div class="bottom-sheet-overlay" onclick="closeBottomSheet('settingsSheet')"></div>
        <div class="bottom-sheet-content">
            <div class="bottom-sheet-handle"></div>
            <div class="bottom-sheet-header">
                <h3>Settings & More</h3>
            </div>
            <div class="bottom-sheet-body">
                <div class="settings-menu">
                    <div class="settings-item" onclick="openHostModal(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#128100;</span>
                        <div class="settings-text">
                            <span class="settings-label">Manage Hosts</span>
                            <span class="settings-desc">Add or edit host names</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                    <div class="settings-item" onclick="openImportGuestsModal(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#128229;</span>
                        <div class="settings-text">
                            <span class="settings-label">Import Guests</span>
                            <span class="settings-desc">From your other events</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                    <div class="settings-item" onclick="openExportModal(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#128196;</span>
                        <div class="settings-text">
                            <span class="settings-label">Export List</span>
                            <span class="settings-desc">Download Excel or PDF</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                    <div class="settings-item" onclick="openBackupModal(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#128190;</span>
                        <div class="settings-text">
                            <span class="settings-label">Backup & Restore</span>
                            <span class="settings-desc">Save or restore your data</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                    <div class="settings-item" onclick="copyAllWhatsappNumbers(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#128222;</span>
                        <div class="settings-text">
                            <span class="settings-label">Copy All Numbers</span>
                            <span class="settings-desc">For WhatsApp broadcast</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                    <hr class="settings-divider">
                    <div class="settings-item danger" onclick="signOutUser(); closeBottomSheet('settingsSheet');">
                        <span class="settings-icon">&#9211;</span>
                        <div class="settings-text">
                            <span class="settings-label">Sign Out</span>
                            <span class="settings-desc">Log out of your account</span>
                        </div>
                        <span class="settings-arrow">&#8250;</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>

    <!-- Event Modal -->
    <div class="modal" id="eventModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>Event Details</h2>
                <button class="modal-close" onclick="closeModal('eventModal')">&times;</button>
            </div>
            <div class="modal-body">
<p class="helper-text" id="eventModalHint">Create a new event or edit the selected event.</p>
                <div class="form-group">
                    <label>Event Name</label>
                    <input type="text" id="newEventName" placeholder="e.g., Wedding Reception, Birthday, Seminar">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Event Date (optional)</label>
                        <input type="date" id="newEventDate">
                    </div>
                    <div class="form-group">
                        <label>Venue (optional)</label>
                        <input type="text" id="newEventVenue" placeholder="e.g., Home, Party Plot, Hall">
                    </div>
                </div>
                <div class="form-group">
                    <label>WhatsApp Message Template (optional)</label>
                    <textarea id="newEventWhatsappTemplate" rows="3" placeholder="Hi {name}, you are invited to {event} on {date} at {venue}. Please confirm."></textarea>
                    <p class="helper-text">Use placeholders: {name}, {event}, {date}, {venue}</p>
                </div>
    
                <button class="btn btn-primary" style="width:100%;" onclick="saveEventMeta()">Create Event</button>
            </div>
        </div>
    </div>

</body>
</html>
